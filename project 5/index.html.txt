<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Snake Game - Pushpendra</title>
<style>
  :root{
    --bg:#0b2236;
    --panel:#071a28;
    --accent:#00d27a;
    --muted:#9fb3c8;
  }
  html,body{height:100%;margin:0;font-family:Segoe UI,Roboto,Arial;}
  body{
    display:flex;
    align-items:center;
    justify-content:center;
    background:linear-gradient(180deg,var(--bg),#071a28);
    color:var(--muted);
  }

  .wrap{
    width:420px;
    max-width:95vw;
    background:var(--panel);
    padding:14px;
    border-radius:12px;
    box-shadow:0 8px 30px rgba(0,0,0,0.6);
    display:grid;
    grid-template-columns: 1fr 160px;
    gap:12px;
    align-items:start;
  }

  canvas{
    background:#08131a;
    border-radius:8px;
    display:block;
    width:100%;
    height:100%;
  }

  .side{
    color:#dff6ec;
    min-height:320px;
  }

  h2{margin:0 0 8px 0;font-size:18px;color:var(--accent)}
  .score{font-size:28px;margin:8px 0;color:#fff}
  .info{font-size:13px;color:var(--muted);line-height:1.4}
  .controls{margin-top:14px;display:flex;gap:8px;flex-wrap:wrap}
  button{
    background:transparent;border:1px solid rgba(255,255,255,0.06);
    padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer;
  }
  button.primary{
    background:var(--accent);border:none;color:#00221a;font-weight:600;
  }
  .overlay{
    position:absolute;left:0;right:0;top:0;bottom:0;
    display:flex;align-items:center;justify-content:center;
    pointer-events:none;
  }
  .msg{
    background:rgba(0,0,0,0.6);padding:20px;border-radius:10px;color:#fff;
    text-align:center;pointer-events:auto;
  }
  .footer{margin-top:12px;font-size:12px;color:var(--muted)}
  /* small on-screen buttons for mobile */
  .touch{
    display:flex;gap:6px;margin-top:12px;flex-wrap:wrap;
  }
  .touch button{flex:1;padding:10px;border-radius:8px}
  @media (max-width:520px){
    .wrap{grid-template-columns:1fr;max-width:420px}
  }
</style>
</head>
<body>
  <div class="wrap" id="gameWrap" style="position:relative;">
    <div style="min-width:200px;">
      <canvas id="game" width="400" height="400"></canvas>
    </div>

    <div class="side">
      <h2>Snake Game</h2>
      <div class="score">Score: <span id="score">0</span></div>
      <div class="info">
        Use <strong>Arrow Keys</strong> or <strong>W A S D</strong> to move.<br>
        Eat the green food to grow. Don't hit walls or yourself.
      </div>

      <div class="controls">
        <button id="btnStart" class="primary">Start</button>
        <button id="btnPause">Pause</button>
        <button id="btnRestart">Restart</button>
      </div>

      <div style="margin-top:10px">
        Speed:
        <select id="speedSel" style="margin-left:8px;padding:6px;border-radius:6px">
          <option value="140">Slow</option>
          <option value="100" selected>Normal</option>
          <option value="70">Fast</option>
          <option value="45">Very Fast</option>
        </select>
      </div>

      <div class="touch" id="touchControls" style="display:none;">
        <button data-dir="up">↑</button>
        <button data-dir="left">←</button>
        <button data-dir="down">↓</button>
        <button data-dir="right">→</button>
      </div>

      <div class="footer">Created for practice — modify & improve!</div>
    </div>

    <!-- Game Over Overlay -->
    <div class="overlay" id="overlay" style="display:none;">
      <div class="msg" id="overlayMsg">
        <h3 id="overTitle">Game Over</h3>
        <p id="overText">Score: 0</p>
        <div style="margin-top:8px">
          <button id="overlayRestart" class="primary">Play Again</button>
          <button id="overlayClose" style="margin-left:8px">Close</button>
        </div>
      </div>
    </div>
  </div>

<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  const scoreEl = document.getElementById('score');
  const btnStart = document.getElementById('btnStart');
  const btnPause = document.getElementById('btnPause');
  const btnRestart = document.getElementById('btnRestart');
  const speedSel = document.getElementById('speedSel');
  const overlay = document.getElementById('overlay');
  const overText = document.getElementById('overText');
  const overlayRestart = document.getElementById('overlayRestart');
  const overlayClose = document.getElementById('overlayClose');
  const touchControls = document.getElementById('touchControls');

  const gridSize = 20;           // each cell 20px
  const cols = canvas.width / gridSize; // 20
  const rows = canvas.height / gridSize;

  let snake = [];
  let dir = {x:1, y:0}; // moving right initially
  let nextDir = dir;
  let food = null;
  let score = 0;
  let running = false;
  let gameInterval = null;
  let speed = parseInt(speedSel.value, 10);

  function resetGame(){
    snake = [];
    // start with length 4 in center
    const startX = Math.floor(cols/2);
    const startY = Math.floor(rows/2);
    for(let i=3;i>=0;i--){
      snake.push({x:startX - i, y:startY});
    }
    dir = {x:1,y:0};
    nextDir = {x:1,y:0};
    placeFood();
    score = 0;
    updateScore();
    hideOverlay();
  }

  function placeFood(){
    while(true){
      const fx = Math.floor(Math.random()*cols);
      const fy = Math.floor(Math.random()*rows);
      // ensure not on snake
      if(!snake.some(s => s.x === fx && s.y === fy)){
        food = {x:fx, y:fy};
        return;
      }
    }
  }

  function draw(){
    // clear
    ctx.fillStyle = '#08131a';
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // draw food
    if(food){
      ctx.fillStyle = '#00d27a';
      roundRect(ctx, food.x*gridSize, food.y*gridSize, gridSize, gridSize, 5, true, false);
    }

    // draw snake
    for(let i=0;i<snake.length;i++){
      const s = snake[i];
      if(i===snake.length-1){
        // head
        ctx.fillStyle = '#7ef1b0';
      } else {
        ctx.fillStyle = '#1fb57f';
      }
      roundRect(ctx, s.x*gridSize+1, s.y*gridSize+1, gridSize-2, gridSize-2, 6, true, false);
    }
  }

  // helper to draw rounded rect
  function roundRect(ctx, x, y, w, h, r, fill, stroke) {
    if (typeof stroke === 'undefined') { stroke = true; }
    if (typeof r === 'undefined') { r = 5; }
    ctx.beginPath();
    ctx.moveTo(x+r, y);
    ctx.arcTo(x+w, y, x+w, y+h, r);
    ctx.arcTo(x+w, y+h, x, y+h, r);
    ctx.arcTo(x, y+h, x, y, r);
    ctx.arcTo(x, y, x+w, y, r);
    ctx.closePath();
    if (fill) ctx.fill();
    if (stroke) ctx.stroke();
  }

  function step(){
    // set direction from queued nextDir but disallow reverse
    if((nextDir.x !== -dir.x || nextDir.y !== -dir.y)){
      dir = nextDir;
    }

    const head = {...snake[snake.length-1]};
    head.x += dir.x;
    head.y += dir.y;

    // wall collision
    if(head.x < 0 || head.x >= cols || head.y < 0 || head.y >= rows){
      gameOver();
      return;
    }

    // self collision
    if(snake.some(s => s.x === head.x && s.y === head.y)){
      gameOver();
      return;
    }

    // push head
    snake.push(head);

    // eat food?
    if(food && head.x === food.x && head.y === food.y){
      score += 10;
      updateScore();
      placeFood();
    } else {
      // move: remove tail
      snake.shift();
    }

    draw();
  }

  function updateScore(){
    scoreEl.textContent = score;
  }

  function gameOver(){
    stopLoop();
    running = false;
    showOverlay(`Game Over`, `Score: ${score}`);
  }

  function startLoop(){
    stopLoop();
    speed = parseInt(speedSel.value,10);
    gameInterval = setInterval(step, speed);
    running = true;
  }

  function stopLoop(){
    if(gameInterval) clearInterval(gameInterval);
    gameInterval = null;
    running = false;
  }

  // keyboard
  window.addEventListener('keydown', (e) => {
    const key = e.key;
    if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','w','a','s','d','W','A','S','D'].includes(key)){
      e.preventDefault();
      if(key === 'ArrowUp' || key === 'w' || key === 'W') nextDir = {x:0,y:-1};
      if(key === 'ArrowDown' || key === 's' || key === 'S') nextDir = {x:0,y:1};
      if(key === 'ArrowLeft' || key === 'a' || key === 'A') nextDir = {x:-1,y:0};
      if(key === 'ArrowRight' || key === 'd' || key === 'D') nextDir = {x:1,y:0};
    }
    if(key === ' '){ // space to pause/resume
      if(running) { stopLoop(); btnPause.textContent = 'Resume' }
      else { startLoop(); btnPause.textContent = 'Pause' }
    }
  });

  // buttons
  btnStart.addEventListener('click', () => {
    if(!running) startLoop();
  });

  btnPause.addEventListener('click', () => {
    if(running){ stopLoop(); btnPause.textContent = 'Resume'; }
    else { startLoop(); btnPause.textContent = 'Pause'; }
  });

  btnRestart.addEventListener('click', () => {
    resetGame();
    startLoop();
    btnPause.textContent = 'Pause';
  });

  overlayRestart.addEventListener('click', () => {
    resetGame();
    startLoop();
  });
  overlayClose.addEventListener('click', hideOverlay);

  speedSel.addEventListener('change', () => {
    if(running) startLoop(); // restart with new speed
  });

  // mobile touch controls (show if small device)
  function setupTouch(){
    if(window.innerWidth <= 520){
      touchControls.style.display = 'flex';
      const buttons = touchControls.querySelectorAll('button');
      buttons.forEach(b => {
        b.addEventListener('touchstart', (ev) => {
          const d = b.getAttribute('data-dir');
          if(d === 'up') nextDir = {x:0,y:-1};
          if(d === 'down') nextDir = {x:0,y:1};
          if(d === 'left') nextDir = {x:-1,y:0};
          if(d === 'right') nextDir = {x:1,y:0};
          ev.preventDefault();
        });
      });
    }
  }

  function showOverlay(title, text){
    document.getElementById('overTitle').textContent = title;
    overText.textContent = text;
    overlay.style.display = 'flex';
  }
  function hideOverlay(){ overlay.style.display = 'none'; }

  // initialize
  resetGame();
  draw();
  setupTouch();

  // helpful: allow clicking canvas to focus
  canvas.addEventListener('click', () => canvas.focus());
})();
</script>
</body>
</html>
